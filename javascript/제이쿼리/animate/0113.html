<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<title>사용자 클릭 갤러리</title>
<style>
    #wrap {
        position: relative;
        margin: 0 auto;
        width: 640px;
        height: 400px;
        /*background: #e3e3e3;*/
    }
    #bigimg {
        padding: 10px 20px;
        position: relative;
    }
    #bigimg img {
        width: 600px;
        height: 300px;
        
    }
    #wrap .gallery {
        position: absolute;
        left: 50%;
        margin-left: -160px;
    }
    .gallery img {
        width: 100px;
        border: 2px solid #afafaf;
    }
    .gallery img:hover {
        border-color: #fff;
    }
    .gallery img.on {
        border-color: #f90;
    }
    #caption {
      position: absolute;
      bottom: 0;
      width: 600px;
      padding: 10px;
      box-sizing: border-box;
      background: rgba(0,0,0,0.3);
      color: #fff;
      border: 1px solid #ccc;
    }
</style>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  $(function(){
    var current=1; // 현재 이미지 순서에 해당하는 변수를 지정합니다.
    $("div.gallery a").eq(current-1).find("img").addClass("on");

    var interval; // 인터벌 움직임을 만들 변수 지정합니다.
    interval=setInterval(interMove, 2000);
     // setTimeout(함수, 시간); 1번 실행
     // setInterval(함수, 시간); 정해진 시간마다 실행, clearInterval(interval);

    function interMove(){ // 일반 함수
	if(current < 3){ // 1, 2, 3, 1, 2, 3, ...
		current=current+1;
	}else{
		current=1;
	}
	// console.log("current : "+current);

	$("div.gallery a").find("img").each(function(){
		if($(this).hasClass("on")){
			$(this).removeClass("on");
		}
	});
	$("div.gallery a").eq(current-1).find("img").addClass("on");

	var path="images/photo"+current+".jpg";
	// console.log("path : "+path);

	 /*$("#bigimg img").attr("src", path)
	 .css({opacity:0})
	 .stop()
	 .animate({opacity:1}, 500);*/
	effectImg($("#bigimg img"), path);
}
function effectImg(img, path){
	img.attr("src", path).css({opacity:0}).stop().animate({opacity:1}, 500);
	return false;
}
$("#bigimg, .gallery a").hover(
	function(){
		clearInterval(interval);
	},
	function(){
		interval=setInterval(interMove, 2000);
	}
);
      
$(".gallery em").hide();
      
$(".gallery a").click(function(e){
	e.preventDefault();
	$(".gallery a").find("img").each(function(){
		if($(this).hasClass("on")){
			$(this).removeClass("on");
		}
	});
	$(this).find("img").addClass("on");

	current=$(this).index();
    console.log("current: "+current);
	current = current+1;
	var path=$(".gallery a").eq(current-1).attr("href");
    console.log(path);
	effectImg($("#bigimg img"), path);
    
    //caption
    /*if(current != $(this).index()) {
        current = $(this).index();
        if("#caption") {
            $("#caption").remove();
        }
        var msg = $(this).find("em").text();
        $("#bigimg").append("<div id='caption'></div>");
        $("#bigimg #caption").text(msg);
        
        var posy = $("#bigimg #caption").height()+120;
        console.log("posy :"+posy);
        $("#bigimg #caption").animate({top:"-="+posy+"px"},300);
    }*/
});
  });
</script>
</head>

<body>
<div id="wrap">
	<div id="bigimg"><img src="images/photo1.jpg" alt="photo" /></div>
	<div class="gallery">
		<a href="images/photo1.jpg" title="img1"><img src="images/photo1.jpg" alt="photo" />
		<!--<em>하나하나하나하나</em>-->
		</a>
		<a href="images/photo2.jpg" title="img2"><img src="images/photo2.jpg" alt="photo" />
		<!--<em>둘둘둘둘</em>-->
		</a>
		<a href="images/photo3.jpg" title="img3"><img src="images/photo3.jpg" alt="photo" />
		<!--<em>셋셋셋셋</em>-->
		</a>
	</div>
</div>
</body>